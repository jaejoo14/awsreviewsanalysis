{% extends "awsreviews/base.html" %}
{% block content %}
   <div>
       <h2>Solr Queries</h2>
<hr>

       <h3>Collection - 20 millions of Amazon Reviews.</h3>
<a href="https://s3.amazonaws.com/amazon-reviews-pds/readme.html" target="_blank">Amazon Customer Reviews</a>
        </div>
<hr>
<br/>

    <div >
       	<p><label>query:</label> <br/>
    	<textarea rows="2" cols="100" name="query" form="searchForm"> Enter lucene query here...</textarea>
    	<form method="GET" action="/search/result" id="searchForm"  >
        	<button type="submit" formtarget="_blank" class="save btn btn-default">Search</button>
    	</form>
    </div>
<hr>
<ul>
        <li><p>Searches</p></li>
                <ul>
                        <li><a href="/search/result?query=facet.field%3Dstar_rating%26facet%3Don%26q%3Dproduct_id%253AB001FA1NUK%26rows%3D0">Facet  by star-ratings</a>
		
			<div class="boxed">facet.field=star_rating&facet=on&q=product_id:B001FA1NUK&rows=0</textarea></div>
			<p>

                </ul>
                <ul>
                        <li><a href="/search/result?query=q%3Dproduct_title:(hdmi%2520AND%2520cable)%26rows%3D0%26facet%3Dtrue%26facet.pivot%3Dproduct_id%2Cstar_rating%26facet.limit%3D10" target="_blank">Facet by Product_id and star-ratings (Pivot)</a>
			<div class="boxed">q=product_title:(hdmi AND cable)&rows=0&facet=true&facet.pivot=product_id,star_rating&facet.limit=10</textarea></div>
			<p> 
                </ul>
                <ul>
			<br>
			<h3>users who frequently post reviews have a 5-star rating by review_date</h3>
                        <li><a href="/search/result?query=facet.limit%3D5%26facet.pivot.mincount%3D10%26facet.pivot%3Dreview_date%252Ccustomer_id%26facet%3Don%26q%3D*%253A*%26rows%3D0" target="_blank">Facet by reviews_date and customer_id (Pivot)</a>
			<div class="boxed">facet.limit=5&facet.pivot.mincount=10&facet.pivot=review_date%2Ccustomer_id&facet=on&q=*:*&rows=0</textarea></div>
			<p> 
                        <li><a href="/search/result?query=facet.limit%3D5%26facet.pivot.mincount%3D10%26facet.pivot%3Dcustomer_id%252Creview_date%26facet%3Don%26q%3D*%253A*%26rows%3D0" target="_blank">Facet by customer_id  and review_date(Pivot)</a>
			<div class="boxed">facet.limit=5&facet.pivot.mincount=10&facet.pivot=customer_id%2Creview_date&facet=on&q=*:*&rows=0</textarea></div>
			<p> 
                        <li><a href="/search/result?query=facet.limit%3D5%26facet.pivot.mincount%3D10%26facet.pivot%3Dcustomer_id%252Creview_date%252Cstar_rating%26facet%3Don%26q%3D*%253A*%26rows%3D0" target="_blank">Facet by customer_id,  review_date and star_rating (Pivot)</a>
			<div class="boxed">facet.limit=5&facet.pivot.mincount=10&facet.pivot=customer_id%2Creview_date%2Cstar_rating&facet=on&q=*:*&rows=0</textarea></div>
			<p> 
                </ul>
		<br/>
                <ul>
                        <li><a href="/search/result?query=fl%3Dreview_id%2Cproduct_title%2Creview_headline%26mlt%3Dtrue%26mlt.match.include%3Dtrue%26mlt.mintf%3D1%26mlt.mindf%3D1%26q%3Did%3AR3K6K40KCJVGXO%26mlt.fl%3Dreview_headline%2Creview_headline%26mlt.count%3D10%26wt%3D%0A" target="_blank">MoreLikeThis by single document</a>
			<div class="boxed">fl=review_id,product_title,review_headline&mlt=true&mlt.match.include=true&mlt.mintf=1&mlt.mindf=1&q=id:R3K6K40KCJVGXO&mlt.fl=review_headline,review_headline&mlt.count=10&wt=json</textarea></div>
			<p> 
                        <li><a href="/search/result?query=fl%3Dreview_id%2Cproduct_title%2Creview_headline%26mlt%3Dtrue%26mlt.match.include%3Dtrue%26mlt.mintf%3D1%26mlt.mindf%3D1%26q%3Dproduct_title:(hdmi%2520AND%2520cable)%26rows%3D5%26mlt.fl%3Dreview_headline%2Creview_headline%26mlt.count%3D10%26wt%3D%0A" target="_blank">MoreLikeThis by search result</a>
			<div class="boxed">fl=review_id,product_title,review_headline&mlt=true&mlt.match.include=true&mlt.mintf=1&mlt.mindf=1&q=product_title:(hdmi%20AND%20cable)&rows=5&mlt.fl=review_headline,review_headline&mlt.count=10&wt=json</textarea></div>
			<p> 
                </ul>
		<br/>
                <ul>
                        <li><a href="/search/result?query=fl%3Did%26hl.fl%3Dreview_body%26hl.fragsize%3D100%26hl.snippets%3D1%26hl%3Don%26q%3Dreview_body%253Ahate">Snippets</a>
        <li><p>Terms  Queries</p></li>
		</ul>
                <ul>
                        <li><a href="/terms/result?query=terms.fl%3Dproduct_title_str%26terms.prefix%3Da%26terms.mincount%3D5%26terms.limit%3D5">Auto Completing (Type Ahead)</a>
                </ul>
                <ul>
                        <li><a href="/terms/result?query=terms.fl%3Dproduct_title_str%26terms.regex%3D.*hdmi.*%26terms.mincount%3D5%26terms.limit%3D5">Auto Completing (regex)</a>
                </ul>
</ul>
<hr>
<br/>
    <div >

       	<p><label>streaming expr:</label> <br/>
    	<textarea rows="2" cols="100" name="expr" form="exprForm"> Enter streaming expression here...</textarea>
    	<form method="GET" action="/search/result" id="exprForm" >
        	<button type="submit" formtarget="_blank" class="save btn btn-default">Submit</button>
    	</form>
    </div>
<hr>
<ul>
        <li><p>Streaming Expression</p></li>
                <ul>
                        <li><a href='/stream/result?expr=search(reviews,q="product_title:(hdmi AND cable)",fl="id, product_title,star_rating",rows=1000,sort="id asc")'>List first 1000 matched documents</a>
                        <li><a href='/stream/result?expr=let(samples=search(reviews,q="product_title:(hdmi AND cable)",fl="id, product_title,star_rating",rows=1000,sort="id asc"),responses=col(samples,star_rating),summary=describe(responses))'>Summary of star-ratings for (hdmi AND cable)</a>
		</ul>
</ul>
{% endblock content %}

